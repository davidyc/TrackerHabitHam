<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="HabihamTrackerApp.MainPage">

    <VerticalStackLayout
        Padding="0"
        Spacing="0"
        VerticalOptions="Fill"
        BackgroundColor="#1A1A1A">

        <!-- Табы -->
        <Grid
            BackgroundColor="#2D2D2D"
            Padding="0"
            RowDefinitions="Auto"
            ColumnDefinitions="*,*">
            
            <Button
                x:Name="ApiTab"
                Grid.Row="0"
                Grid.Column="0"
                Text="Аналитика"
                BackgroundColor="#4A90E2"
                TextColor="White"
                FontSize="16"
                FontAttributes="Bold"
                CornerRadius="0"
                HeightRequest="60"
                Clicked="OnApiTabClicked" />
            
            <Button
                x:Name="SyncTab"
                Grid.Row="0"
                Grid.Column="1"
                Text="Синхронизация"
                BackgroundColor="#404040"
                TextColor="#CCCCCC"
                FontSize="16"
                FontAttributes="Bold"
                CornerRadius="0"
                HeightRequest="60"
                Clicked="OnSyncTabClicked" />
        </Grid>

        <!-- Контент табов -->
        <ScrollView BackgroundColor="#1A1A1A">
            <VerticalStackLayout
                Padding="15"
                Spacing="20"
                VerticalOptions="Fill"
                BackgroundColor="#1A1A1A">

                <!-- Блок 1: API вызов -->
                <Frame
                    x:Name="ApiFrame"
                    BackgroundColor="#2D2D2D"
                    BorderColor="#4A90E2"
                    CornerRadius="15"
                    Padding="25"
                    HasShadow="True"
                    HorizontalOptions="Fill"
                    VerticalOptions="Start"
                    IsVisible="True">
                    
                    <VerticalStackLayout Spacing="20">
                        <Label
                            Text="Аналитика"
                            FontSize="20"
                            FontAttributes="Bold"
                            TextColor="#FFFFFF"
                            HorizontalOptions="Center" />

                        <!-- Поля выбора дат -->
                        <Frame
                            BackgroundColor="#404040"
                            CornerRadius="10"
                            Padding="15"
                            HasShadow="False">                            
                            <VerticalStackLayout Spacing="15">
                                <Label
                                    Text="Выберите период для анализа:"
                                    FontSize="16"
                                    FontAttributes="Bold"
                                    TextColor="#FFFFFF"
                                    HorizontalOptions="Center" />
                                
                                <Grid ColumnDefinitions="Auto,*,Auto,*" ColumnSpacing="15" RowDefinitions="Auto">
                                    <Label
                                        Grid.Row="0"
                                        Grid.Column="0"
                                        Text="Дата начала:"
                                        FontSize="14"
                                        TextColor="#CCCCCC"
                                        VerticalOptions="Center" />
                                    
                                    <DatePicker
                                        x:Name="StartDatePicker"
                                        Grid.Row="0"
                                        Grid.Column="1"
                                        Date="{Binding StartDate, Mode=TwoWay}"
                                        Format="dd.MM.yyyy"
                                        FontSize="14"
                                        TextColor="#FFFFFF"
                                        BackgroundColor="#555555" />
                                    
                                    <Label
                                        Grid.Row="0"
                                        Grid.Column="2"
                                        Text="Дата окончания:"
                                        FontSize="14"
                                        TextColor="#CCCCCC"
                                        VerticalOptions="Center" />
                                    
                                    <DatePicker
                                        x:Name="EndDatePicker"
                                        Grid.Row="0"
                                        Grid.Column="3"
                                        Date="{Binding EndDate, Mode=TwoWay}"
                                        Format="dd.MM.yyyy"
                                        FontSize="14"
                                        TextColor="#FFFFFF"
                                        BackgroundColor="#555555" />
                                </Grid>
                            </VerticalStackLayout>
                        </Frame>

                        <!-- Результаты аналитики -->
                        <Frame
                            BackgroundColor="#404040"
                            CornerRadius="10"
                            Padding="15"
                            HasShadow="False">
                            
                            <VerticalStackLayout Spacing="10">
                                <Label
                                    x:Name="StartDateLabel"
                                    Text="Период начала: -"
                                    FontSize="14"
                                    TextColor="#CCCCCC" />
                                
                                <Label
                                    x:Name="EndDateLabel"
                                    Text="Период окончания: -"
                                    FontSize="14"
                                    TextColor="#CCCCCC" />
                                
                                <Label
                                    x:Name="MinValueLabel"
                                    Text="Минимальное значение: -"
                                    FontSize="14"
                                    TextColor="#CCCCCC" />
                                
                                <Label
                                    x:Name="MaxValueLabel"
                                    Text="Максимальное значение: -"
                                    FontSize="14"
                                    TextColor="#CCCCCC" />
                                
                                <Label
                                    x:Name="AverageLabel"
                                    Text="Среднее значение: -"
                                    FontSize="14"
                                    TextColor="#CCCCCC" />
                                
                                <Label
                                    x:Name="StartValueLabel"
                                    Text="Начальное значение: -"
                                    FontSize="14"
                                    TextColor="#CCCCCC" />
                                
                                <Label
                                    x:Name="EndValueLabel"
                                    Text="Конечное значение: -"
                                    FontSize="14"
                                    TextColor="#CCCCCC" />
                                
                                <Label
                                    x:Name="ChangeLabel"
                                    Text="Изменение: -"
                                    FontSize="14"
                                    TextColor="#CCCCCC" />
                            </VerticalStackLayout>
                        </Frame>

                        <Button
                            x:Name="ApiBtn"
                            Text="Получить аналитику" 
                            Clicked="OnApiButtonClicked"
                            HorizontalOptions="Fill"
                            BackgroundColor="#4A90E2"
                            TextColor="White"
                            FontSize="16"
                            FontAttributes="Bold"
                            CornerRadius="10"
                            HeightRequest="50" />
                    </VerticalStackLayout>
                </Frame>

                <!-- Блок 2: Синхронизация -->
                <Frame
                    x:Name="SyncFrame"
                    BackgroundColor="#2D2D2D"
                    BorderColor="#50C878"
                    CornerRadius="15"
                    Padding="25"
                    HasShadow="True"
                    HorizontalOptions="Fill"
                    VerticalOptions="Start"
                    IsVisible="False">
                    
                    <VerticalStackLayout Spacing="20">
                        <Label
                            Text="Синхронизация"
                            FontSize="20"
                            FontAttributes="Bold"
                            TextColor="#FFFFFF"
                            HorizontalOptions="Center" />

                        <Label
                            x:Name="SyncLabel"
                            Text="Статус синхронизации"
                            HorizontalOptions="Fill"
                            HorizontalTextAlignment="Center"
                            FontSize="14"
                            TextColor="#CCCCCC"
                            BackgroundColor="#404040"
                            Padding="15"
                            MinimumHeightRequest="80"
                            VerticalTextAlignment="Center" />

                        <Button
                            x:Name="SyncBtn"
                            Text="Синхронизировать" 
                            Clicked="OnSyncButtonClicked"
                            HorizontalOptions="Fill"
                            BackgroundColor="#50C878"
                            TextColor="White"
                            FontSize="16"
                            FontAttributes="Bold"
                            CornerRadius="10"
                            HeightRequest="50" />
                    </VerticalStackLayout>
                </Frame>

            </VerticalStackLayout>
        </ScrollView>

    </VerticalStackLayout>

</ContentPage>
